(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),l=n.n(c),u=n(1),o=n.n(u),s=n(2),i=n(4),p=n.n(i),m=function(e){var t;return o.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(p.a.post("/api/login",e));case 2:return t=n.sent,console.log(t),n.abrupt("return",t.data);case 5:case"end":return n.stop()}})},d=null,v=function(){return p.a.get("/api/blogs").then(function(e){return e.data})},b=function(e){d="bearer ".concat(e)},f=function(e){var t,n;return o.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t={headers:{Authorization:d}},a.prev=1,a.next=4,o.a.awrap(p.a.post("/api/blogs",e,t));case 4:return n=a.sent,a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(1),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}},null,null,[[1,8]])},g=function(e,t){var n,a;return o.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n={headers:{Authorization:d}},r.prev=1,r.next=4,o.a.awrap(p.a.put("".concat("/api/blogs","/").concat(e),t,n));case 4:return a=r.sent,r.abrupt("return",a);case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",r.t0);case 11:case"end":return r.stop()}},null,null,[[1,8]])},w=function(e){var t,n;return o.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t={headers:{Authorization:d}},a.prev=1,a.next=4,o.a.awrap(p.a.delete("".concat("/api/blogs","/").concat(e),t));case 4:return n=a.sent,a.abrupt("return",n);case 8:return a.prev=8,a.t0=a.catch(1),a.abrupt("return",a.t0);case 11:case"end":return a.stop()}},null,null,[[1,8]])},h=function(e){var t=e.username,n=e.setUsername,a=e.password,c=e.setPassword,l=e.handleLogin,u=e.handleVisible,o=e.visible;return r.a.createElement("div",null,o&&r.a.createElement("form",{onSubmit:l},r.a.createElement("div",null,"username",r.a.createElement("input",{type:"text",value:t,name:"Username",onChange:n})),r.a.createElement("div",null,"password",r.a.createElement("input",{type:"password",value:a,name:"Password",onChange:c})),r.a.createElement("button",{type:"submit"},"login")),r.a.createElement("button",{onClick:u},o?"cancel":"login"))},E=function(e){var t=e.blog,n=e.onLike,c=e.onRemoveBlog,l=e.isBlogMaker,u=Object(a.useState)(!0),o=Object(s.a)(u,2),i=o[0],p=o[1];return r.a.createElement("div",{style:{border:"1px solid black",display:"block",marginTop:6,padding:6}},r.a.createElement("div",{onClick:function(){return p(!i)}},"".concat(t.title," ").concat(t.author)),!i&&r.a.createElement("a",{href:t.url},t.url),!i&&r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline"}},"".concat(t.likes," likes")),r.a.createElement("button",{style:{display:"inline"},onClick:function(){return n(t)}},"like")),!i&&r.a.createElement("div",null,"added by ".concat(t.user.name)),!i&&l&&r.a.createElement("button",{onClick:function(){return c(t)}},"Remove"))},k=function(e){var t=e.blogs,n=e.onLike,a=e.onRemoveBlog,c=e.user;return r.a.createElement("div",null,t.sort(function(e,t){return e.likes<t.likes?1:-1}).map(function(e,t){var l=e.user.username===c.username;return r.a.createElement(E,{key:t,blog:e,onLike:n,onRemoveBlog:a,isBlogMaker:l})}))},x=function(e){var t=e.addBlog,n=e.visible,c=e.toggleVisible,l=Object(a.useState)(""),u=Object(s.a)(l,2),o=u[0],i=u[1],p=Object(a.useState)(""),m=Object(s.a)(p,2),d=m[0],v=m[1],b=Object(a.useState)(""),f=Object(s.a)(b,2),g=f[0],w=f[1];return r.a.createElement("div",null,n&&r.a.createElement("div",null,r.a.createElement("div",null,"title:",r.a.createElement("input",{type:"text",value:o,name:"title",onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",null,"author:",r.a.createElement("input",{type:"text",value:d,name:"author",onChange:function(e){return v(e.target.value)}})),r.a.createElement("div",null,"url:",r.a.createElement("input",{type:"text",value:g,name:"url",onChange:function(e){return w(e.target.value)}})),r.a.createElement("button",{onClick:function(){t({title:o,author:d,url:g})}},"create")),r.a.createElement("button",{onClick:function(){i(""),v(""),w(""),c()}},n?"cancel":"create blog"))},y=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),i=u[0],p=u[1],d=Object(a.useState)(!1),E=Object(s.a)(d,2),y=E[0],O=E[1],j=Object(a.useState)(!1),S=Object(s.a)(j,2),B=S[0],C=S[1],T=Object(a.useState)([]),L=Object(s.a)(T,2),R=L[0],U=L[1],A=Object(a.useState)(null),I=Object(s.a)(A,2),N=I[0],J=I[1],V=Object(a.useState)(null),z=Object(s.a)(V,2),P=z[0],D=z[1],M=Object(a.useState)(null),q=Object(s.a)(M,2),F=q[0],G=q[1];Object(a.useEffect)(function(){v().then(function(e){return U(e)})},[]),Object(a.useEffect)(function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);G(t),b(t.token)}},[]);var H=function(){y?(c(""),p(""),O(!1)):O(!0)},K=function(e){var t;return o.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return e.preventDefault(),a.prev=1,a.next=4,o.a.awrap(m({username:n,password:i}));case 4:t=a.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(t)),b(t.token),G(t),c(""),p(""),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),J("wrong username or password"),setTimeout(function(){J(null)},5e3);case 16:case"end":return a.stop()}},null,null,[[1,12]])},Q=function(e){return c(e.target.value)},W=function(e){return p(e.target.value)};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"App-header"},"Blogs"),r.a.createElement("div",{style:{color:"red"}},N),r.a.createElement("div",{style:{color:"green"}},P),F?r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("p",null,"".concat(F.name," logged in")),r.a.createElement("button",{onClick:function(){G(null),window.localStorage.removeItem("loggedNoteappUser")}},"logout")),r.a.createElement("h2",null,"create new blog"),r.a.createElement(x,{addBlog:function(e){var t,n,a;return o.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.awrap(f(e));case 3:if(200!==(t=r.sent).status){r.next=14;break}return n=t.data.author,D("a new blog ".concat(e.title," added").concat(n?" by ".concat(n,"."):".")),r.next=9,o.a.awrap(v());case 9:a=r.sent,U(a),setTimeout(function(){D(null)},5e3),r.next=16;break;case 14:J("".concat(t.response.data.error)),setTimeout(function(){J(null)},5e3);case 16:r.next=22;break;case 18:r.prev=18,r.t0=r.catch(0),J("".concat(r.t0)),setTimeout(function(){J(null)},5e3);case 22:case"end":return r.stop()}},null,null,[[0,18]])},visible:B,toggleVisible:function(){return C(!B)}}),r.a.createElement(k,{blogs:R,onLike:function(e){var t,n;return o.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t={likes:e.likes+1,author:e.author,title:e.title,url:e.url},a.next=4,o.a.awrap(g(e.id,t));case 4:return a.next=6,o.a.awrap(v());case 6:n=a.sent,U(n),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}},null,null,[[0,10]])},onRemoveBlog:function(e){var t,n;return o.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Remove blog ".concat(e.title))){a.next=22;break}return a.prev=1,a.next=4,o.a.awrap(w(e.id));case 4:if(204!==(t=a.sent).status){a.next=14;break}return D("".concat(e.title," was succesfully removed")),a.next=9,o.a.awrap(v());case 9:n=a.sent,U(n),setTimeout(function(){D(null)},5e3),a.next=16;break;case 14:J("".concat(t.response.data.error)),setTimeout(function(){J(null)},5e3);case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(1),J("".concat(a.t0)),setTimeout(function(){J(null)},5e3);case 22:case"end":return a.stop()}},null,null,[[1,18]])},user:F})):r.a.createElement(h,{username:n,password:i,setUsername:Q,setPassword:W,handleLogin:K,visible:y,handleVisible:H}))};l.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a1a3cc88.chunk.js.map